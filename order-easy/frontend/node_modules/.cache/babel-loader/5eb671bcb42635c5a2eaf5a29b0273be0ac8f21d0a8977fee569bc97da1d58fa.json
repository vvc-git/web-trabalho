{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MonthPaginator = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_popper_1 = require(\"react-popper\");\nvar emotion_1 = require(\"emotion\");\nvar i18n_1 = require(\"../../i18n\");\nvar styles_1 = require(\"../../styles\");\nvar locale_1 = require(\"../../util/locale\");\nvar Button_1 = require(\"../Button\");\nvar Icon_1 = require(\"../Icon\");\nvar HFlow_1 = require(\"../HFlow\");\nvar MonthPicker_1 = require(\"../MonthPicker/MonthPicker\");\nvar Text_1 = require(\"../Text\");\nvar Tooltip_1 = require(\"../Tooltip\");\nvar FocusManagerContainer_1 = require(\"../FocusManagerContainer\");\nfunction MonthPaginator(props) {\n  var month = props.month,\n    year = props.year,\n    isOpen = props.isOpen,\n    ghost = props.ghost,\n    popperPlacement = props.popperPlacement,\n    formatter = props.formatter,\n    onChange = props.onChange;\n  var locale = i18n_1.useLocale();\n  var _a = react_1.useState(isOpen),\n    open = _a[0],\n    setOpen = _a[1];\n  var _b = styles_1.useStyles(createStyles, open).classes,\n    container = _b.container,\n    ghostContainer = _b.ghostContainer,\n    showMonth = _b.showMonth,\n    popup = _b.popup;\n  var _c = react_1.useState(month),\n    visibleMonth = _c[0],\n    setVisibleMonth = _c[1];\n  react_1.useEffect(function () {\n    setVisibleMonth(month);\n  }, [month]);\n  var _d = react_1.useState(year),\n    visibleYear = _d[0],\n    setVisibleYear = _d[1];\n  react_1.useEffect(function () {\n    setVisibleYear(year);\n  }, [year]);\n  var _e = react_1.useState(),\n    anchorRef = _e[0],\n    setAnchorRef = _e[1];\n  var _f = react_1.useState(),\n    popperRef = _f[0],\n    setPopperRef = _f[1];\n  var _g = react_popper_1.usePopper(anchorRef, popperRef, {\n      placement: popperPlacement\n    }),\n    popperStyle = _g.styles.popper,\n    placement = _g.attributes.placement;\n  var updateStates = function (newMonth) {\n    setVisibleMonth(newMonth.month);\n    setVisibleYear(newMonth.year);\n    onChange && onChange(newMonth);\n  };\n  var onPrevClick = function () {\n    if (open) setVisibleYear(function (currYear) {\n      return currYear - 1;\n    });else {\n      var newMonth = visibleMonth === 0 ? 11 : visibleMonth - 1;\n      var newYear = visibleMonth === 0 ? visibleYear - 1 : visibleYear;\n      updateStates({\n        month: newMonth,\n        year: newYear\n      });\n    }\n  };\n  var onNextClick = function () {\n    if (open) setVisibleYear(function (currYear) {\n      return currYear + 1;\n    });else {\n      var newMonth = visibleMonth === 11 ? 0 : visibleMonth + 1;\n      var newYear = visibleMonth === 11 ? visibleYear + 1 : visibleYear;\n      updateStates({\n        month: newMonth,\n        year: newYear\n      });\n    }\n  };\n  var onMonthClick = function (month) {\n    updateStates(month);\n    setOpen(!open);\n  };\n  var onVisibleMonthChange = function (month) {\n    return updateStates(month);\n  };\n  var handleShowMonthsClick = function () {\n    return setOpen(!open);\n  };\n  var handleFocusOut = function () {\n    return setOpen(false);\n  };\n  react_1.useEffect(function () {\n    open && (popperRef === null || popperRef === void 0 ? void 0 : popperRef.focus());\n  }, [open, popperRef]);\n  var baseYearDate = new Date(visibleYear, visibleMonth, 1, 0, 0, 0, 0);\n  var yearFormatter = new Intl.DateTimeFormat(locale_1.getUserLocale(), {\n    year: 'numeric'\n  });\n  var monthFormatter = locale_1.getMonthShortFormat(baseYearDate, formatter);\n  return react_1.default.createElement(FocusManagerContainer_1.FocusManagerContainer, {\n    onFocusOut: handleFocusOut\n  }, react_1.default.createElement(\"div\", {\n    className: ghost ? ghostContainer : container,\n    ref: setAnchorRef\n  }, react_1.default.createElement(HFlow_1.HFlow, {\n    alignItems: 'center'\n  }, react_1.default.createElement(Tooltip_1.Tooltip, {\n    text: locale.calendar.previousMonth\n  }, react_1.default.createElement(Button_1.Button, {\n    disabled: open,\n    size: 'small',\n    skin: 'ghost',\n    onClick: onPrevClick,\n    \"data-testid\": 'MonthPaginator.PrevButton'\n  }, react_1.default.createElement(Icon_1.Icon, {\n    icon: 'angleLeft'\n  }))), react_1.default.createElement(Tooltip_1.Tooltip, {\n    text: locale.monthPaginator.show\n  }, react_1.default.createElement(Button_1.Button, {\n    size: 'small',\n    skin: 'ghost',\n    disabled: false,\n    onClick: handleShowMonthsClick,\n    style: showMonth,\n    \"data-testid\": 'MonthPaginator.ShowMonthsButton'\n  }, react_1.default.createElement(Text_1.Text, {\n    fontWeight: 'bold',\n    fontSize: 0.875\n  }, monthFormatter + \" - \", yearFormatter.format(baseYearDate)))), react_1.default.createElement(Tooltip_1.Tooltip, {\n    text: locale.calendar.nextMonth\n  }, react_1.default.createElement(Button_1.Button, {\n    disabled: open,\n    size: 'small',\n    skin: 'ghost',\n    onClick: onNextClick,\n    \"data-testid\": 'MonthPaginator.NextButton'\n  }, react_1.default.createElement(Icon_1.Icon, {\n    icon: 'angleRight'\n  }))))), open && react_1.default.createElement(MonthPicker_1.MonthPicker, {\n    visibleMonth: {\n      month: visibleMonth,\n      year: visibleYear\n    },\n    onVisibleMonthChange: onVisibleMonthChange,\n    onMonthClick: onMonthClick,\n    ref: setPopperRef,\n    className: emotion_1.css(popup, popperStyle),\n    \"data-placement\": placement\n  }));\n}\nexports.MonthPaginator = MonthPaginator;\nMonthPaginator.defaultProps = {\n  isOpen: false,\n  popperPlacement: 'bottom-start',\n  month: new Date().getMonth(),\n  year: new Date().getFullYear()\n};\nvar createStyles = function (theme, open) {\n  return {\n    container: {\n      display: 'inline-block',\n      padding: '1rem 0.5rem',\n      backgroundColor: theme.pallete.surface.main,\n      border: \"1px solid \" + theme.pallete.divider,\n      boxShadow: theme.shadows.outer['20'],\n      borderRadius: theme.radius.popper\n    },\n    ghostContainer: {\n      padding: '-2rem'\n    },\n    showMonth: {\n      margin: 'auto -1rem'\n    },\n    popup: {\n      zIndex: theme.zIndex.popper\n    }\n  };\n};\n//# sourceMappingURL=MonthPaginator.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}