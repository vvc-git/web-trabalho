{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useCallback, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n      top = _ref.top,\n      left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\nfunction debounce(fn, time) {\n  var timeoutId;\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n    resultCount = _ref2.resultCount,\n    previousResultCount = _ref2.previousResultCount;\n  if (!isOpen) {\n    return '';\n  }\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ? /* istanbul ignore next (preact) */\n  arg[0] : arg;\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n    keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n  if (itemCount === 0) {\n    return -1;\n  }\n  var itemsLastIndex = itemCount - 1;\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n  var newIndex = baseIndex + moveAmount;\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n  return nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n}\nfunction validateControlledUnchanged(state, prevProps, nextProps) {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  Object.keys(state).forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n  if (!status) {\n    return;\n  }\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n  if (statusDiv) {\n    return statusDiv;\n  }\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\nvar Downshift = /*#__PURE__*/\nfunction () {\n  var Downshift = /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n    function Downshift(_props) {\n      var _this = _Component.call(this, _props) || this;\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n        _this.timeoutIds.push(id);\n      };\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n        if (item == null) {\n          return;\n        }\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends(_extends({}, _this.getStateAndHelpers()), stateToSet));\n        }\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n\n          var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n            if (key === 'type') {\n              return;\n            }\n            nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends(_extends({}, _this.getStateAndHelpers()), newStateToSet));\n          }\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n        var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n        var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                  highlightedIndex = _this2$getState.highlightedIndex;\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                  highlightedIndex = _this3$getState.highlightedIndex;\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n          var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset({\n            type: keyDownEscape,\n            selectedItem: null,\n            inputValue: ''\n          });\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends(_extends({}, _this.keyDownHandlers), {}, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends(_extends({}, _this.keyDownHandlers), {}, {\n        Home: function Home(event) {\n          var _this4 = this;\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          var _this$getState3 = this.getState(),\n            isOpen = _this$getState3.isOpen;\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          var _this$getState4 = this.getState(),\n            isOpen = _this$getState4.isOpen;\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick,\n          onPress = _ref3.onPress,\n          onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n        var _this$getState5 = _this.getState(),\n          isOpen = _this$getState5.isOpen;\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends(_extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers), rest);\n      };\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n        });\n      };\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput,\n          onChangeText = _ref4.onChangeText,\n          rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        onChangeKey = 'onChange';\n        var _this$getState6 = _this.getState(),\n          inputValue = _this$getState6.inputValue,\n          isOpen = _this$getState6.isOpen,\n          highlightedIndex = _this$getState6.highlightedIndex;\n        if (!rest.disabled) {\n          var _eventHandlers;\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        /* istanbul ignore if (react-native) */\n\n        return _extends(_extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers), rest);\n      };\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick,\n          onPress = _ref7.onPress,\n          index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ? /* istanbul ignore next */\n          undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n        if (index === undefined) {\n          _this.items.push(item);\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n            _this.avoidScrolling = true;\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends(_extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers), rest);\n      };\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends(_extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }), otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n            isOpen = _this$getState7.isOpen,\n            highlightedIndex = _this$getState7.highlightedIndex;\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n          cbToCb(cb)();\n        });\n      };\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n        var item = _this.items[state.highlightedIndex];\n        var resultCount = _this.getItemCount();\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n      _this.state = _state;\n      return _this;\n    }\n    var _proto = Downshift.prototype;\n\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n      return getState(stateToMerge, this.props);\n    };\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n      return itemCount;\n    };\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n      var itemCount = this.getItemCount();\n      var _this$getState8 = this.getState(),\n        highlightedIndex = _this$getState8.highlightedIndex;\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n        highlightedIndex = _this$getState9.highlightedIndex,\n        inputValue = _this$getState9.inputValue,\n        selectedItem = _this$getState9.selectedItem,\n        isOpen = _this$getState9.isOpen;\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function () {\n          _this7.isMouseDown = true;\n        };\n        var onMouseUp = function (event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n        var onTouchStart = function () {\n          _this7.isTouchMove = false;\n        };\n        var onTouchMove = function () {\n          _this7.isTouchMove = true;\n        };\n        var onTouchEnd = function (event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n          _this7.updateStatus.cancel();\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n    };\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n      this.updateStatus();\n    };\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n      if (!element) {\n        return null;\n      }\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n      return undefined;\n    };\n    return Downshift;\n  }(Component);\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */ ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes;\n  return Downshift;\n}();\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n} : void 0;\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, props, state, newState);\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\nfunction invokeOnChangeHandler(key, props, state, newState) {\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](newState);\n  }\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n    itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n/**\n * Debounced call for updating the a11y message.\n */\n\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200);\nfunction getElementIds(_ref) {\n  var id = _ref.id,\n    labelId = _ref.labelId,\n    menuId = _ref.menuId,\n    getItemId = _ref.getItemId,\n    toggleButtonId = _ref.toggleButtonId;\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n  if (items.length === 0) {\n    return -1;\n  }\n  return items.indexOf(item);\n}\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n    Object.keys(propTypes).forEach(function (key) {\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\nfunction useLatestRef(val) {\n  var ref = useRef(val); // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n\n  ref.current = val;\n  return ref;\n}\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends(_extends({}, action), {}, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n  var _useReducer = useReducer(enhancedReducer, initialState),\n    state = _useReducer[0],\n    dispatch = _useReducer[1];\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  return [getState(state, props), dispatch];\n}\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */ ? {} : window\n};\nfunction getDefaultValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n  return defaultStateValues[propKey];\n}\nfunction getInitialValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  if (propKey in props) {\n    return props[propKey];\n  }\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var isOpen = getInitialValue(props, 'isOpen');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var inputValue = getInitialValue(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n    initialHighlightedIndex = props.initialHighlightedIndex,\n    defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n    highlightedIndex = state.highlightedIndex;\n  if (items.length === 0) {\n    return -1;\n  } // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n  if (offset === 0) {\n    return -1;\n  }\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\n\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document)) {\n        handleBlur();\n      }\n    };\n    var onTouchStart = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n    var onTouchMove = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document, false)) {\n        handleBlur();\n      }\n    };\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n\nfunction useGetterPropsCalledChecker() {\n  for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n    propKeys[_key] = arguments[_key];\n  }\n  var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n    acc[propKey] = {};\n    return acc;\n  }, {}));\n  if (process.env.NODE_ENV !== 'production') {\n    Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n      getterPropsCalledRef.current[propKey] = null;\n    });\n  }\n  useEffect(function () {\n    if (process.env.NODE_ENV !== 'production') {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        if (!getterPropsCalledRef.current[propKey]) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n          return;\n        }\n        var _getterPropsCalledRef = getterPropsCalledRef.current[propKey],\n          suppressRefError = _getterPropsCalledRef.suppressRefError,\n          refKey = _getterPropsCalledRef.refKey,\n          elementRef = _getterPropsCalledRef.elementRef;\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n    }\n  });\n  var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n    if (process.env.NODE_ENV !== 'production') {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }\n  }, []);\n  return setGetterPropCallInfo;\n}\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam, getItemNodeFromIndex) {\n  var lowerCasedItemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n  var isValid = function (itemString, index) {\n    var element = getItemNodeFromIndex(index);\n    return itemString.startsWith(lowerCasedKeysSoFar) && !(element && element.hasAttribute('disabled'));\n  };\n  for (var index = highlightedIndex + 1; index < lowerCasedItemStrings.length; index++) {\n    var itemString = lowerCasedItemStrings[index];\n    if (isValid(itemString, index)) {\n      return index;\n    }\n  }\n  for (var _index = 0; _index < highlightedIndex; _index++) {\n    var _itemString = lowerCasedItemStrings[_index];\n    if (isValid(_itemString, _index)) {\n      return _index;\n    }\n  }\n  return highlightedIndex;\n}\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n    resultCount = _ref.resultCount,\n    previousResultCount = _ref.previousResultCount;\n  if (!isOpen) {\n    return '';\n  }\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n  }\n  return '';\n}\nvar defaultProps$1 = _extends(_extends({}, defaultProps), {}, {\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n    props = action.props,\n    shiftKey = action.shiftKey;\n  var changes;\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n    case FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends(_extends({}, state), changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes = process.env.NODE_ENV === 'production' ? /* istanbul ignore next */\nnull : getPropTypesValidator(useSelect, propTypes);\nuseSelect.stateChangeTypes = stateChangeTypes$1;\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes(userProps);\n  } // Props defaults and destructuring.\n\n  var props = _extends(_extends({}, defaultProps$1), userProps);\n  var items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    initialIsOpen = props.initialIsOpen,\n    defaultIsOpen = props.defaultIsOpen,\n    itemToString = props.itemToString,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    getA11yStatusMessage = props.getA11yStatusMessage; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props);\n  var _useControlledReducer = useControlledReducer(downshiftSelectReducer, initialState, props),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue; // Element efs.\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  itemRefs.current = {}; // used not to scroll when highlight by mouse.\n\n  var shouldScrollRef = useRef(true); // used not to trigger menu blur action in some scenarios.\n\n  var shouldBlurRef = useRef(true); // used to keep the inputValue clearTimeout object between renders.\n\n  var clearTimeoutRef = useRef(null); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Some utils.\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Sets cleanup for the keysSoFar after 500ms.\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMountRef.current) {\n      clearTimeoutRef.current = debounce(function (outerDispatch) {\n        outerDispatch({\n          type: FunctionSetInputValue,\n          inputValue: ''\n        });\n      }, 500);\n    }\n    if (!inputValue) {\n      return;\n    }\n    clearTimeoutRef.current(dispatch); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputValue]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n      return;\n    } // Focus menu on open.\n\n    if (isOpen) {\n      // istanbul ignore else\n      if (menuRef.current) {\n        menuRef.current.focus();\n      }\n      return;\n    } // Focus toggleButton on close, but not if it was closed with (Shift+)Tab.\n\n    if (environment.document.activeElement === menuRef.current) {\n      // istanbul ignore else\n      if (toggleButtonRef.current) {\n        shouldBlurRef.current = false;\n        toggleButtonRef.current.focus();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [highlightedIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: MenuBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      }\n    };\n  }, [dispatch]);\n  var menuKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: MenuKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnter\n        });\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownSpaceButton\n        });\n      }\n    };\n  }, [dispatch]); // Action functions.\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]); // Getter functions.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.toggleButtonId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n    var _ref = _temp === void 0 ? {} : _temp,\n      onMouseLeave = _ref.onMouseLeave,\n      _ref$refKey = _ref.refKey,\n      refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n      onKeyDown = _ref.onKeyDown,\n      onBlur = _ref.onBlur,\n      ref = _ref.ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$suppressRefErro = _ref2.suppressRefError,\n      suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n    var latestState = latest.current.state;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends(_extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.tabIndex = -1, _extends2), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }), {}, {\n      onMouseLeave: callAllEventHandlers(onMouseLeave, function menuHandleMouseLeave() {\n        dispatch({\n          type: MenuMouseLeave\n        });\n      }),\n      onKeyDown: callAllEventHandlers(onKeyDown, function menuHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n        if (key && menuKeyDownHandlers[key]) {\n          menuKeyDownHandlers[key](event);\n        } else if (isAcceptedCharacterKey(key)) {\n          dispatch({\n            type: MenuKeyDownCharacter,\n            key: key,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }),\n      onBlur: callAllEventHandlers(onBlur, function menuHandleBlur() {\n        // if the blur was a result of selection, we don't trigger this action.\n        if (shouldBlurRef.current === false) {\n          shouldBlurRef.current = true;\n          return;\n        }\n        var shouldBlur = !mouseAndTouchTrackersRef.current.isMouseDown;\n        /* istanbul ignore else */\n\n        if (shouldBlur) {\n          dispatch({\n            type: MenuBlur\n          });\n        }\n      })\n    }, rest);\n  }, [dispatch, latest, menuKeyDownHandlers, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      onClick = _ref3.onClick,\n      onKeyDown = _ref3.onKeyDown,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n      _ref4$suppressRefErro = _ref4.suppressRefError,\n      suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n    var toggleButtonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3.id = elementIdsRef.current.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-labelledby'] = elementIdsRef.current.labelId + \" \" + elementIdsRef.current.toggleButtonId, _extends3), rest);\n    if (!rest.disabled) {\n      toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n      toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n    }\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, latest, toggleButtonKeyDownHandlers, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n      item = _ref5.item,\n      index = _ref5.index,\n      onMouseMove = _ref5.onMouseMove,\n      onClick = _ref5.onClick,\n      _ref5$refKey = _ref5.refKey,\n      refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n      ref = _ref5.ref,\n      rest = _objectWithoutPropertiesLoose(_ref5, [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"refKey\", \"ref\"]);\n    var _latest$current = latest.current,\n      latestState = _latest$current.state,\n      latestProps = _latest$current.props;\n    var itemHandleMouseMove = function () {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index\n      });\n    };\n    var itemHandleClick = function () {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n    var itemProps = _extends((_extends4 = {\n      role: 'option',\n      'aria-selected': \"\" + (itemIndex === latestState.highlightedIndex),\n      id: elementIdsRef.current.getItemId(itemIndex)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends4), rest);\n    if (!rest.disabled) {\n      itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n      itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n    }\n    return itemProps;\n  }, [dispatch, latest]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 19;\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\nfunction getElementIds$1(_ref) {\n  var id = _ref.id,\n    inputId = _ref.inputId,\n    rest = _objectWithoutPropertiesLoose(_ref, [\"id\", \"inputId\"]);\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return _extends({\n    inputId: inputId || uniqueId + \"-input\"\n  }, getElementIds(_extends({\n    id: id\n  }, rest)));\n}\nfunction getInitialState$1(props) {\n  var initialState = getInitialState(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n  return _extends(_extends({}, initialState), {}, {\n    inputValue: inputValue\n  });\n}\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1]; // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n\n  if (isControlledProp(props, 'selectedItem')) {\n    if (previousSelectedItemRef.current !== props.selectedItem) {\n      dispatch({\n        type: ControlledPropUpdatedSelectedItem,\n        inputValue: props.itemToString(props.selectedItem)\n      });\n    }\n    previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n  }\n  return [getState(state, props), dispatch];\n}\nvar defaultProps$2 = _extends(_extends({}, defaultProps), {}, {\n  getA11yStatusMessage: getA11yStatusMessage,\n  circularNavigation: true\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n    props = action.props,\n    shiftKey = action.shiftKey;\n  var changes;\n  switch (type) {\n    case ItemMouseMove$1:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n      break;\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n      break;\n    case InputKeyDownEnter:\n      changes = _extends({}, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n    case InputKeyDownEscape:\n      changes = {\n        isOpen: false,\n        selectedItem: null,\n        highlightedIndex: -1,\n        inputValue: ''\n      };\n      break;\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case InputBlur:\n      changes = _extends({\n        isOpen: false\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex]),\n        highlightedIndex: -1\n      });\n      break;\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n    case MenuMouseLeave$1:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n    case ToggleButtonClick$1:\n    case FunctionToggleMenu$1:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionOpenMenu$1:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionCloseMenu$1:\n      changes = {\n        isOpen: false\n      };\n      break;\n    case FunctionSetHighlightedIndex$1:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n    case ControlledPropUpdatedSelectedItem:\n    case FunctionSetInputValue$1:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    case FunctionReset$1:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends(_extends({}, state), changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes$1 = process.env.NODE_ENV === 'production' ? /* istanbul ignore next */\nnull : getPropTypesValidator(useCombobox, propTypes$1);\nuseCombobox.stateChangeTypes = stateChangeTypes$2;\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$1(userProps);\n  } // Props defaults and destructuring.\n\n  var props = _extends(_extends({}, defaultProps$2), userProps);\n  var initialIsOpen = props.initialIsOpen,\n    defaultIsOpen = props.defaultIsOpen,\n    items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    getA11yStatusMessage = props.getA11yStatusMessage,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    itemToString = props.itemToString; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props);\n  var _useControlledReducer = useControlledReducer$1(downshiftUseComboboxReducer, initialState, props),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue; // Element refs.\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  itemRefs.current = {}; // used not to scroll on highlight by mouse.\n\n  var shouldScrollRef = useRef(true);\n  var isInitialMountRef = useRef(true); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds$1(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef(); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // used to store information about getter props being called on render.\n  // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [highlightedIndex]); // Controls the focus on the menu or the toggle button.\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [comboboxRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getComboboxProps', 'getMenuProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []);\n  /* Event handler functions */\n\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: InputKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        // if IME composing, wait for next Enter keydown event.\n        if (event.which === 229) {\n          return;\n        }\n        var latestState = latest.current.state;\n        if (latestState.isOpen && latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEnter,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]); // Getter props.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.inputId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n    var _ref = _temp === void 0 ? {} : _temp,\n      onMouseLeave = _ref.onMouseLeave,\n      _ref$refKey = _ref.refKey,\n      refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n      ref = _ref.ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$suppressRefErro = _ref2.suppressRefError,\n      suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      item = _ref3.item,\n      index = _ref3.index,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onMouseMove = _ref3.onMouseMove,\n      onClick = _ref3.onClick,\n      onPress = _ref3.onPress,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n    var _latest$current = latest.current,\n      latestProps = _latest$current.props,\n      latestState = _latest$current.state;\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    return _extends(_extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === latestState.highlightedIndex), _extends3.id = elementIdsRef.current.getItemId(itemIndex), _extends3), !rest.disabled && (_ref4 = {\n      onMouseMove: callAllEventHandlers(onMouseMove, function itemHandleMouseMove() {\n        if (index === latestState.highlightedIndex) {\n          return;\n        }\n        shouldScrollRef.current = false;\n        dispatch({\n          type: ItemMouseMove$1,\n          index: index\n        });\n      })\n    }, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    }), _ref4)), rest);\n  }, [dispatch, latest]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n      onClick = _ref5.onClick,\n      onPress = _ref5.onPress,\n      _ref5$refKey = _ref5.refKey,\n      refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n      ref = _ref5.ref,\n      rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n      if (!latest.current.state.isOpen && inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n    return _extends(_extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4.id = elementIdsRef.current.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    })), rest);\n  }, [dispatch, latest]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n      onKeyDown = _ref6.onKeyDown,\n      onChange = _ref6.onChange,\n      onInput = _ref6.onInput,\n      onBlur = _ref6.onBlur,\n      onChangeText = _ref6.onChangeText,\n      _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n      _ref7$suppressRefErro = _ref7.suppressRefError,\n      suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n    var inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n    var inputHandleChange = function (event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n    var inputHandleBlur = function () {\n      /* istanbul ignore else */\n      if (!mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n    /* istanbul ignore next (preact) */\n\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n    if (!rest.disabled) {\n      var _eventHandlers;\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n    }\n    /* istanbul ignore if (react-native) */\n\n    return _extends(_extends(_extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5.id = elementIdsRef.current.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIdsRef.current.menuId, _extends5), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }), {}, {\n      'aria-labelledby': elementIdsRef.current.labelId,\n      // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n      // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n      autoComplete: 'off',\n      value: latestState.inputValue\n    }, eventHandlers), rest);\n  }, [dispatch, inputKeyDownHandlers, latest, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getComboboxProps = useCallback(function (_temp7, _temp8) {\n    var _extends6;\n    var _ref8 = _temp7 === void 0 ? {} : _temp7,\n      _ref8$refKey = _ref8.refKey,\n      refKey = _ref8$refKey === void 0 ? 'ref' : _ref8$refKey,\n      ref = _ref8.ref,\n      rest = _objectWithoutPropertiesLoose(_ref8, [\"refKey\", \"ref\"]);\n    var _ref9 = _temp8 === void 0 ? {} : _temp8,\n      _ref9$suppressRefErro = _ref9.suppressRefError,\n      suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n    setGetterPropCallInfo('getComboboxProps', suppressRefError, refKey, comboboxRef);\n    return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n      comboboxRef.current = comboboxNode;\n    }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIdsRef.current.menuId, _extends6['aria-expanded'] = latest.current.state.isOpen, _extends6), rest);\n  }, [latest, setGetterPropCallInfo]); // returns\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getComboboxProps: getComboboxProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getInitialValue$1(props, propKey) {\n  return getInitialValue(props, propKey, defaultStateValues);\n}\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getDefaultValue$1(props, propKey) {\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\n\nfunction getInitialState$2(props) {\n  var activeIndex = getInitialValue$1(props, 'activeIndex');\n  var selectedItems = getInitialValue$1(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\n\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n  var element = event.target;\n  if (element instanceof HTMLInputElement &&\n  // if element is a text input\n  element.value !== '' && (\n  // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n  return true;\n}\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n    itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\nvar propTypes$2 = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps$3 = {\n  itemToString: defaultProps.itemToString,\n  stateReducer: defaultProps.stateReducer,\n  environment: defaultProps.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset$2\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n    index = action.index,\n    props = action.props,\n    selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n  var changes;\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        var newActiveIndex = activeIndex;\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1))\n        }, {\n          activeIndex: _newActiveIndex\n        });\n        break;\n      }\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n    case FunctionReset$2:\n      changes = {\n        activeIndex: getDefaultValue$1(props, 'activeIndex'),\n        selectedItems: getDefaultValue$1(props, 'selectedItems')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends(_extends({}, state), changes);\n}\nuseMultipleSelection.stateChangeTypes = stateChangeTypes$3;\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  // Props defaults and destructuring.\n  var props = _extends(_extends({}, defaultProps$3), userProps);\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n    itemToString = props.itemToString,\n    environment = props.environment,\n    keyNavigationNext = props.keyNavigationNext,\n    keyNavigationPrevious = props.keyNavigationPrevious; // Reducer init.\n\n  var _useControlledReducer = useControlledReducer(downshiftMultipleSelectionReducer, getInitialState$2(props), props),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems; // Refs.\n\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = []; // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props);\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Effects.\n\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n    previousSelectedItemsRef.current = selectedItems; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]); // Sets focus on active item.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]);\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]); // Getter props.\n\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n    var _ref3 = _temp === void 0 ? {} : _temp,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onClick = _ref3.onClick,\n      onKeyDown = _ref3.onKeyDown,\n      selectedItem = _ref3.selectedItem,\n      index = _ref3.index,\n      rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"]);\n    var latestState = latest.current.state;\n    var itemIndex = getItemIndex(index, selectedItem, latestState.selectedItems);\n    if (itemIndex < 0) {\n      throw new Error('Pass either selectedItem or index in getSelectedItemProps!');\n    }\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = index === latestState.activeIndex ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    }), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    }), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      onKeyDown = _ref4.onKeyDown,\n      onClick = _ref4.onClick,\n      _ref4$preventKeyActio = _ref4.preventKeyAction,\n      preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n      rest = _objectWithoutPropertiesLoose(_ref4, [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"]);\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    return _extends(_extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, function dropdownHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n        if (key && dropdownKeyDownHandlers[key]) {\n          dropdownKeyDownHandlers[key](event);\n        }\n      }),\n      onClick: callAllEventHandlers(onClick, function dropdownHandleClick() {\n        dispatch({\n          type: DropdownClick\n        });\n      })\n    }), rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]); // returns\n\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useMultipleSelection, useSelect };","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","cloneElement","Component","useRef","useEffect","useCallback","useReducer","useMemo","isForwardRef","computeScrollIntoView","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","handleRefs","_len4","refs","_key4","ref","current","generateId","String","resetIdCounter","getA11yStatusMessage","_ref2","isOpen","resultCount","previousResultCount","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","result","k","getState","Object","keys","reduce","prevState","key","isControlledProp","undefined","normalizeArrowKey","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","getItemNodeFromIndex","circular","itemsLastIndex","newIndex","nonDisabledNewIndex","getNextNonDisabledIndex","currentElementNode","hasAttribute","index","_index","targetWithinDownshift","target","downshiftElements","document","checkActiveElement","contextNode","activeElement","validateControlledUnchanged","prevProps","nextProps","process","env","NODE_ENV","warningDescription","propKey","cleanupStatus","getStatusDiv","textContent","setStatus","status","documentProp","div","statusDiv","getElementById","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","unknown","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes","freeze","__proto__","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","input","items","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","selectedItem","inputValue","defaultIsOpen","selectItem","item","itemToString","selectItemAtIndex","itemIndex","selectHighlightedItem","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","nextFullState","hasMoreStateThanType","onStateChange","onSelect","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","_this2$getState","nextHighlightedIndex","ArrowUp","_this3","_this3$getState","Enter","which","_this$getState2","itemNode","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","_this4","_this$getState3","newHighlightedIndex","End","_this5","_this$getState4","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState5","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","environment","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState6","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState7","openMenu","closeMenu","updateStatus","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","getState$1","stateToMerge","scrollHighlightedItemIntoView","_this6","_this$getState8","_this$getState9","componentDidMount","_this7","validateGetMenuPropsCalledCorrectly","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","componentDidUpdate","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","Error","defaultProps","warn","prevItem","window","propTypes","func","number","bool","any","string","shape","_ref12","_ref13","refKeySpecified","isComposite","dropdownDefaultStateValues","callOnChangeProps","action","newState","changes","invokeOnChangeHandler","handler","capitalizeString","s","a","getA11ySelectionMessage","selectionParameters","itemToStringLocal","updateA11yStatus","getA11yMessage","getElementIds","toggleButtonId","uniqueId","getItemIndex","getPropTypesValidator","caller","options","checkPropTypes","name","isAcceptedCharacterKey","test","slice","toUpperCase","useLatestRef","val","useEnhancedReducer","reducer","initialState","prevStateRef","actionRef","enhancedReducer","_useReducer","dispatch","propsRef","dispatchWithProps","useControlledReducer","_useEnhancedReducer","circularNavigation","getDefaultValue","defaultStateValues","defaultPropKey","getInitialValue","initialPropKey","getInitialState","getHighlightedIndexOnOpen","offset","useMouseAndTouchTracker","downshiftElementRefs","handleBlur","mouseAndTouchTrackersRef","map","useGetterPropsCalledChecker","propKeys","getterPropsCalledRef","acc","_getterPropsCalledRef","elementRef","setGetterPropCallInfo","getItemIndexByCharacterKey","keysSoFar","itemToStringParam","lowerCasedItemStrings","toLowerCase","lowerCasedKeysSoFar","isValid","itemString","startsWith","_itemString","array","isRequired","defaultSelectedItem","onSelectedItemChange","onHighlightedIndexChange","onIsOpenChange","getA11yStatusMessage$1","defaultProps$1","MenuKeyDownArrowDown","MenuKeyDownArrowUp","MenuKeyDownEscape","MenuKeyDownHome","MenuKeyDownEnd","MenuKeyDownEnter","MenuKeyDownSpaceButton","MenuKeyDownCharacter","MenuBlur","MenuMouseLeave","ItemMouseMove","ItemClick","ToggleButtonClick","ToggleButtonKeyDownArrowDown","ToggleButtonKeyDownArrowUp","ToggleButtonKeyDownCharacter","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSelectItem","FunctionSetInputValue","FunctionReset","stateChangeTypes$1","downshiftSelectReducer","lowercasedKey","_lowercasedKey","validatePropTypes","useSelect","userProps","_useControlledReducer","toggleButtonRef","itemRefs","shouldScrollRef","shouldBlurRef","clearTimeoutRef","elementIdsRef","previousResultCountRef","isInitialMountRef","prevPropsRef","latest","outerDispatch","toggleButtonKeyDownHandlers","menuKeyDownHandlers","newSelectedItem","setInputValue","newInputValue","labelProps","onMouseLeave","latestState","tabIndex","menuHandleMouseLeave","menuHandleKeyDown","menuHandleBlur","shouldBlur","_ref3$refKey","_ref4$suppressRefErro","toggleButtonHandleClick","toggleButtonHandleKeyDown","toggleProps","toggleButtonNode","_extends4","_latest$current","latestProps","itemHandleMouseMove","itemHandleClick","itemProps","InputKeyDownArrowDown","InputKeyDownArrowUp","InputKeyDownEscape","InputKeyDownHome","InputKeyDownEnd","InputKeyDownEnter","InputChange","InputBlur","MenuMouseLeave$1","ItemMouseMove$1","ItemClick$1","ToggleButtonClick$1","FunctionToggleMenu$1","FunctionOpenMenu$1","FunctionCloseMenu$1","FunctionSetHighlightedIndex$1","FunctionSelectItem$1","FunctionSetInputValue$1","FunctionReset$1","ControlledPropUpdatedSelectedItem","stateChangeTypes$2","getElementIds$1","getInitialState$1","defaultInputValue","propTypes$1","useControlledReducer$1","previousSelectedItemRef","defaultProps$2","downshiftUseComboboxReducer","validatePropTypes$1","useCombobox","inputRef","comboboxRef","_extends5","_ref6$refKey","_ref7$suppressRefErro","inputNode","getComboboxProps","_temp8","_extends6","_ref8$refKey","_ref9$suppressRefErro","comboboxNode","activeIndex","selectedItems","getInitialValue$1","getDefaultValue$1","getInitialState$2","isKeyDownOperationPermitted","metaKey","ctrlKey","altKey","HTMLInputElement","selectionStart","selectionEnd","getA11yRemovalMessage","removedSelectedItem","propTypes$2","initialSelectedItems","defaultSelectedItems","initialActiveIndex","defaultActiveIndex","onActiveIndexChange","onSelectedItemsChange","keyNavigationNext","keyNavigationPrevious","defaultProps$3","SelectedItemClick","SelectedItemKeyDownDelete","SelectedItemKeyDownBackspace","SelectedItemKeyDownNavigationNext","SelectedItemKeyDownNavigationPrevious","DropdownKeyDownNavigationPrevious","DropdownKeyDownBackspace","DropdownClick","FunctionAddSelectedItem","FunctionRemoveSelectedItem","FunctionSetSelectedItems","FunctionSetActiveIndex","FunctionReset$2","stateChangeTypes$3","downshiftMultipleSelectionReducer","newActiveIndex","_newActiveIndex","selectedItemIndex","newSelectedItems","_newActiveIndex2","useMultipleSelection","dropdownRef","previousSelectedItemsRef","selectedItemRefs","find","activeSelectedItem","selectedItemKeyDownHandlers","Delete","Backspace","dropdownKeyDownHandlers","getSelectedItemProps","selectedItemNode","selectedItemHandleClick","selectedItemHandleKeyDown","getDropdownProps","_ref4$refKey","_ref4$preventKeyActio","preventKeyAction","_ref5$suppressRefErro","dropdownNode","dropdownHandleKeyDown","dropdownHandleClick","addSelectedItem","removeSelectedItem","setSelectedItems","setActiveIndex"],"sources":["/home/daniel/Área de Trabalho/Trabalho-ProgWeb/web-trabalho/order-easy/frontend/node_modules/downshift/dist/downshift.esm.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useCallback, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport computeScrollIntoView from 'compute-scroll-into-view';\n\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n\n  var actions = computeScrollIntoView(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child) {\n  return parent === child || parent.contains && parent.contains(child);\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  if (itemCount === 0) {\n    return -1;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n\n  return nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Document} document The document.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, document, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target) || checkActiveElement && isOrContainsNode(contextNode, document.activeElement));\n  });\n}\n\nfunction validateControlledUnchanged(state, prevProps, nextProps) {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n\n  var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n  Object.keys(state).forEach(function (propKey) {\n    if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n    } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n      // eslint-disable-next-line no-console\n      console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n    }\n  });\n}\n\nvar cleanupStatus = debounce(function () {\n  getStatusDiv().textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus();\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar Downshift =\n/*#__PURE__*/\nfunction () {\n  var Downshift =\n  /*#__PURE__*/\n  function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this = _Component.call(this, _props) || this;\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = [];\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends(_extends({}, _this.getStateAndHelpers()), stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // this is just used to tell whether the state changed\n\n          var nextFullState = {}; // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            nextFullState[key] = newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends(_extends({}, _this.getStateAndHelpers()), newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n\n        var _ref = _temp === void 0 ? {} : _temp,\n            _ref$refKey = _ref.refKey,\n            refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n            ref = _ref.ref,\n            rest = _objectWithoutPropertiesLoose(_ref, [\"refKey\", \"ref\"]);\n\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset({\n            type: keyDownEscape,\n            selectedItem: null,\n            inputValue: ''\n          });\n        }\n      };\n      _this.buttonKeyDownHandlers = _extends(_extends({}, _this.keyDownHandlers), {}, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends(_extends({}, _this.keyDownHandlers), {}, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n            onClick = _ref3.onClick,\n            onPress = _ref3.onPress,\n            onKeyDown = _ref3.onKeyDown,\n            onKeyUp = _ref3.onKeyUp,\n            onBlur = _ref3.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"]);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends(_extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers), rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if ( _this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n              _this.reset({\n                type: blurButton\n              });\n            }\n        });\n      };\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n            onKeyDown = _ref4.onKeyDown,\n            onBlur = _ref4.onBlur,\n            onChange = _ref4.onChange,\n            onInput = _ref4.onInput,\n            onChangeText = _ref4.onChangeText,\n            rest = _objectWithoutPropertiesLoose(_ref4, [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"]);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        onChangeKey = 'onChange';\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        /* istanbul ignore if (react-native) */\n\n\n        return _extends(_extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers), rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n            _ref5$refKey = _ref5.refKey,\n            refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n            ref = _ref5.ref,\n            props = _objectWithoutPropertiesLoose(_ref5, [\"refKey\", \"ref\"]);\n\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n            _ref6$suppressRefErro = _ref6.suppressRefError,\n            suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n            onMouseMove = _ref7.onMouseMove,\n            onMouseDown = _ref7.onMouseDown,\n            onClick = _ref7.onClick,\n            onPress = _ref7.onPress,\n            index = _ref7.index,\n            _ref7$item = _ref7.item,\n            item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n            rest = _objectWithoutPropertiesLoose(_ref7, [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"]);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends(_extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers), rest);\n      };\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends(_extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }), otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    } //////////////////////////// ROOT\n    ;\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function () {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function (event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function () {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function () {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function (event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment.document, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref10.highlightedIndex;\n\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref11.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      return scrollWhenOpen || currentHighlightedIndex !== prevHighlightedIndex;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if ( this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      this.updateStatus();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: typeof window === 'undefined'\n    /* istanbul ignore next (ssr) */\n    ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, props, state, newState);\n\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\n\nfunction invokeOnChangeHandler(key, props, state, newState) {\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](newState);\n  }\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n/**\n * Debounced call for updating the a11y message.\n */\n\n\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200);\nfunction getElementIds(_ref) {\n  var id = _ref.id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId;\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return {\n    labelId: labelId || uniqueId + \"-label\",\n    menuId: menuId || uniqueId + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return uniqueId + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || uniqueId + \"-toggle-button\"\n  };\n}\nfunction getItemIndex(index, item, items) {\n  if (index !== undefined) {\n    return index;\n  }\n\n  if (items.length === 0) {\n    return -1;\n  }\n\n  return items.indexOf(item);\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction getPropTypesValidator(caller, propTypes) {\n  // istanbul ignore next\n  return function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    Object.keys(propTypes).forEach(function (key) {\n      PropTypes.checkPropTypes(propTypes, options, key, caller.name);\n    });\n  };\n}\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\nfunction useLatestRef(val) {\n  var ref = useRef(val); // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n\n  ref.current = val;\n  return ref;\n}\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends(_extends({}, action), {}, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1];\n\n  return [getState(state, props), dispatch];\n}\nvar defaultProps = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  circularNavigation: false,\n  environment: typeof window === 'undefined'\n  /* istanbul ignore next (ssr) */\n  ? {} : window\n};\nfunction getDefaultValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  var defaultPropKey = \"default\" + capitalizeString(propKey);\n\n  if (defaultPropKey in props) {\n    return props[defaultPropKey];\n  }\n\n  return defaultStateValues[propKey];\n}\nfunction getInitialValue(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  if (propKey in props) {\n    return props[propKey];\n  }\n\n  var initialPropKey = \"initial\" + capitalizeString(propKey);\n\n  if (initialPropKey in props) {\n    return props[initialPropKey];\n  }\n\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\nfunction getInitialState(props) {\n  var selectedItem = getInitialValue(props, 'selectedItem');\n  var isOpen = getInitialValue(props, 'isOpen');\n  var highlightedIndex = getInitialValue(props, 'highlightedIndex');\n  var inputValue = getInitialValue(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nfunction getHighlightedIndexOnOpen(props, state, offset, getItemNodeFromIndex) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex;\n\n  if (items.length === 0) {\n    return -1;\n  } // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    if (offset === 0) {\n      return items.indexOf(selectedItem);\n    }\n\n    return getNextWrappingIndex(offset, items.indexOf(selectedItem), items.length, getItemNodeFromIndex, false);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\n\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    // The same strategy for checking if a click occurred inside or outside downsift\n    // as in downshift.js.\n    var onMouseDown = function () {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function (event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document)) {\n        handleBlur();\n      }\n    };\n\n    var onTouchStart = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function () {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function (event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment.document, false)) {\n        handleBlur();\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n    return function () {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n\nfunction useGetterPropsCalledChecker() {\n  for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n    propKeys[_key] = arguments[_key];\n  }\n\n  var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n    acc[propKey] = {};\n    return acc;\n  }, {}));\n\n  if (process.env.NODE_ENV !== 'production') {\n    Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n      getterPropsCalledRef.current[propKey] = null;\n    });\n  }\n\n  useEffect(function () {\n    if (process.env.NODE_ENV !== 'production') {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        if (!getterPropsCalledRef.current[propKey]) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n          return;\n        }\n\n        var _getterPropsCalledRef = getterPropsCalledRef.current[propKey],\n            suppressRefError = _getterPropsCalledRef.suppressRefError,\n            refKey = _getterPropsCalledRef.refKey,\n            elementRef = _getterPropsCalledRef.elementRef;\n\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n    }\n  });\n  var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n    if (process.env.NODE_ENV !== 'production') {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }\n  }, []);\n  return setGetterPropCallInfo;\n}\n\nfunction getItemIndexByCharacterKey(keysSoFar, highlightedIndex, items, itemToStringParam, getItemNodeFromIndex) {\n  var lowerCasedItemStrings = items.map(function (item) {\n    return itemToStringParam(item).toLowerCase();\n  });\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  var isValid = function (itemString, index) {\n    var element = getItemNodeFromIndex(index);\n    return itemString.startsWith(lowerCasedKeysSoFar) && !(element && element.hasAttribute('disabled'));\n  };\n\n  for (var index = highlightedIndex + 1; index < lowerCasedItemStrings.length; index++) {\n    var itemString = lowerCasedItemStrings[index];\n\n    if (isValid(itemString, index)) {\n      return index;\n    }\n  }\n\n  for (var _index = 0; _index < highlightedIndex; _index++) {\n    var _itemString = lowerCasedItemStrings[_index];\n\n    if (isValid(_itemString, _index)) {\n      return _index;\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage$1(_ref) {\n  var isOpen = _ref.isOpen,\n      resultCount = _ref.resultCount,\n      previousResultCount = _ref.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\";\n  }\n\n  return '';\n}\n\nvar defaultProps$1 = _extends(_extends({}, defaultProps), {}, {\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\n\nvar MenuKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_down__' : 0;\nvar MenuKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_arrow_up__' : 1;\nvar MenuKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_escape__' : 2;\nvar MenuKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_home__' : 3;\nvar MenuKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_end__' : 4;\nvar MenuKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_enter__' : 5;\nvar MenuKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_space_button__' : 6;\nvar MenuKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__menu_keydown_character__' : 7;\nvar MenuBlur = process.env.NODE_ENV !== \"production\" ? '__menu_blur__' : 8;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 9;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 10;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 11;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 12;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 13;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 14;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 15;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 16;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 17;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 18;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 19;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 20;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 21;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 22;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  MenuKeyDownArrowDown: MenuKeyDownArrowDown,\n  MenuKeyDownArrowUp: MenuKeyDownArrowUp,\n  MenuKeyDownEscape: MenuKeyDownEscape,\n  MenuKeyDownHome: MenuKeyDownHome,\n  MenuKeyDownEnd: MenuKeyDownEnd,\n  MenuKeyDownEnter: MenuKeyDownEnter,\n  MenuKeyDownSpaceButton: MenuKeyDownSpaceButton,\n  MenuKeyDownCharacter: MenuKeyDownCharacter,\n  MenuBlur: MenuBlur,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var itemIndex = getItemIndexByCharacterKey(inputValue, state.selectedItem ? props.items.indexOf(state.selectedItem) : -1, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: inputValue\n        }, itemIndex >= 0 && {\n          selectedItem: props.items[itemIndex]\n        });\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n        isOpen: true\n      };\n      break;\n\n    case MenuKeyDownEnter:\n    case MenuKeyDownSpaceButton:\n      changes = _extends({\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex')\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case MenuKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case MenuKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuBlur:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case MenuKeyDownCharacter:\n      {\n        var _lowercasedKey = action.key;\n\n        var _inputValue = \"\" + state.inputValue + _lowercasedKey;\n\n        var highlightedIndex = getItemIndexByCharacterKey(_inputValue, state.highlightedIndex, props.items, props.itemToString, action.getItemNodeFromIndex);\n        changes = _extends({\n          inputValue: _inputValue\n        }, highlightedIndex >= 0 && {\n          highlightedIndex: highlightedIndex\n        });\n      }\n      break;\n\n    case MenuKeyDownArrowDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuKeyDownArrowUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n      };\n      break;\n\n    case MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick:\n    case FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    case FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends(_extends({}, state), changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useSelect, propTypes);\nuseSelect.stateChangeTypes = stateChangeTypes$1;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends(_extends({}, defaultProps$1), userProps);\n\n  var items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      itemToString = props.itemToString,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage; // Initial state depending on controlled props.\n\n  var initialState = getInitialState(props);\n\n  var _useControlledReducer = useControlledReducer(downshiftSelectReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element efs.\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  itemRefs.current = {}; // used not to scroll when highlight by mouse.\n\n  var shouldScrollRef = useRef(true); // used not to trigger menu blur action in some scenarios.\n\n  var shouldBlurRef = useRef(true); // used to keep the inputValue clearTimeout object between renders.\n\n  var clearTimeoutRef = useRef(null); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Some utils.\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Sets cleanup for the keysSoFar after 500ms.\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    if (isInitialMountRef.current) {\n      clearTimeoutRef.current = debounce(function (outerDispatch) {\n        outerDispatch({\n          type: FunctionSetInputValue,\n          inputValue: ''\n        });\n      }, 500);\n    }\n\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeoutRef.current(dispatch); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputValue]);\n  /* Controls the focus on the menu or the toggle button. */\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if ((initialIsOpen || defaultIsOpen || isOpen) && menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus menu on open.\n\n\n    if (isOpen) {\n      // istanbul ignore else\n      if (menuRef.current) {\n        menuRef.current.focus();\n      }\n\n      return;\n    } // Focus toggleButton on close, but not if it was closed with (Shift+)Tab.\n\n\n    if (environment.document.activeElement === menuRef.current) {\n      // istanbul ignore else\n      if (toggleButtonRef.current) {\n        shouldBlurRef.current = false;\n        toggleButtonRef.current.focus();\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: MenuBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      }\n    };\n  }, [dispatch]);\n  var menuKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          shiftKey: event.shiftKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: MenuKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownEnter\n        });\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        dispatch({\n          type: MenuKeyDownSpaceButton\n        });\n      }\n    };\n  }, [dispatch]); // Action functions.\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]); // Getter functions.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.toggleButtonId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        onKeyDown = _ref.onKeyDown,\n        onBlur = _ref.onBlur,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    var latestState = latest.current.state;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends(_extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.tabIndex = -1, _extends2), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }), {}, {\n      onMouseLeave: callAllEventHandlers(onMouseLeave, function menuHandleMouseLeave() {\n        dispatch({\n          type: MenuMouseLeave\n        });\n      }),\n      onKeyDown: callAllEventHandlers(onKeyDown, function menuHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && menuKeyDownHandlers[key]) {\n          menuKeyDownHandlers[key](event);\n        } else if (isAcceptedCharacterKey(key)) {\n          dispatch({\n            type: MenuKeyDownCharacter,\n            key: key,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }),\n      onBlur: callAllEventHandlers(onBlur, function menuHandleBlur() {\n        // if the blur was a result of selection, we don't trigger this action.\n        if (shouldBlurRef.current === false) {\n          shouldBlurRef.current = true;\n          return;\n        }\n\n        var shouldBlur = !mouseAndTouchTrackersRef.current.isMouseDown;\n        /* istanbul ignore else */\n\n        if (shouldBlur) {\n          dispatch({\n            type: MenuBlur\n          });\n        }\n      })\n    }, rest);\n  }, [dispatch, latest, menuKeyDownHandlers, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"onClick\", \"onKeyDown\", \"refKey\", \"ref\"]);\n\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        _ref4$suppressRefErro = _ref4.suppressRefError,\n        suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n\n    var toggleButtonHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3.id = elementIdsRef.current.toggleButtonId, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-labelledby'] = elementIdsRef.current.labelId + \" \" + elementIdsRef.current.toggleButtonId, _extends3), rest);\n\n    if (!rest.disabled) {\n      toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n      toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n    }\n\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [dispatch, latest, toggleButtonKeyDownHandlers, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        item = _ref5.item,\n        index = _ref5.index,\n        onMouseMove = _ref5.onMouseMove,\n        onClick = _ref5.onClick,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"refKey\", \"ref\"]);\n\n    var _latest$current = latest.current,\n        latestState = _latest$current.state,\n        latestProps = _latest$current.props;\n\n    var itemHandleMouseMove = function () {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index\n      });\n    };\n\n    var itemHandleClick = function () {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var itemProps = _extends((_extends4 = {\n      role: 'option',\n      'aria-selected': \"\" + (itemIndex === latestState.highlightedIndex),\n      id: elementIdsRef.current.getItemId(itemIndex)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends4), rest);\n\n    if (!rest.disabled) {\n      itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n      itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n    }\n\n    return itemProps;\n  }, [dispatch, latest]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 5;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 6;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 7;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 8;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 9;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 10;\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 11;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 12;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 13;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 14;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 15;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 16;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 17;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 18;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 19;\n\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  ToggleButtonClick: ToggleButtonClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getElementIds$1(_ref) {\n  var id = _ref.id,\n      inputId = _ref.inputId,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"id\", \"inputId\"]);\n\n  var uniqueId = id === undefined ? \"downshift-\" + generateId() : id;\n  return _extends({\n    inputId: inputId || uniqueId + \"-input\"\n  }, getElementIds(_extends({\n    id: id\n  }, rest)));\n}\nfunction getInitialState$1(props) {\n  var initialState = getInitialState(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends(_extends({}, initialState), {}, {\n    inputValue: inputValue\n  });\n}\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  circularNavigation: PropTypes.bool,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1]; // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n\n\n  if (isControlledProp(props, 'selectedItem')) {\n    if (previousSelectedItemRef.current !== props.selectedItem) {\n      dispatch({\n        type: ControlledPropUpdatedSelectedItem,\n        inputValue: props.itemToString(props.selectedItem)\n      });\n    }\n\n    previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n  }\n\n  return [getState(state, props), dispatch];\n}\nvar defaultProps$2 = _extends(_extends({}, defaultProps), {}, {\n  getA11yStatusMessage: getA11yStatusMessage,\n  circularNavigation: true\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var type = action.type,\n      props = action.props,\n      shiftKey = action.shiftKey;\n  var changes;\n\n  switch (type) {\n    case ItemMouseMove$1:\n      changes = {\n        highlightedIndex: action.index\n      };\n      break;\n\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? 5 : 1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(shiftKey ? -5 : -1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, props.circularNavigation)\n        };\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: true\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = _extends({}, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        isOpen: getDefaultValue(props, 'isOpen'),\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputKeyDownEscape:\n      changes = {\n        isOpen: false,\n        selectedItem: null,\n        highlightedIndex: -1,\n        inputValue: ''\n      };\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false\n      }, state.highlightedIndex >= 0 && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex]),\n        highlightedIndex: -1\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case MenuMouseLeave$1:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonClick$1:\n    case FunctionToggleMenu$1:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionOpenMenu$1:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionCloseMenu$1:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case FunctionSetHighlightedIndex$1:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n\n    case ControlledPropUpdatedSelectedItem:\n    case FunctionSetInputValue$1:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case FunctionReset$1:\n      changes = {\n        highlightedIndex: getDefaultValue(props, 'highlightedIndex'),\n        isOpen: getDefaultValue(props, 'isOpen'),\n        selectedItem: getDefaultValue(props, 'selectedItem'),\n        inputValue: getDefaultValue(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends(_extends({}, state), changes);\n}\n/* eslint-enable complexity */\n\nvar validatePropTypes$1 = process.env.NODE_ENV === 'production' ?\n/* istanbul ignore next */\nnull : getPropTypesValidator(useCombobox, propTypes$1);\nuseCombobox.stateChangeTypes = stateChangeTypes$2;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$1(userProps);\n  } // Props defaults and destructuring.\n\n\n  var props = _extends(_extends({}, defaultProps$2), userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      itemToString = props.itemToString; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props);\n\n  var _useControlledReducer = useControlledReducer$1(downshiftUseComboboxReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element refs.\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef();\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var comboboxRef = useRef(null);\n  itemRefs.current = {}; // used not to scroll on highlight by mouse.\n\n  var shouldScrollRef = useRef(true);\n  var isInitialMountRef = useRef(true); // prevent id re-generation between renders.\n\n  var elementIdsRef = useRef(getElementIds$1(props)); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef(); // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props); // used to store information about getter props being called on render.\n  // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  var getItemNodeFromIndex = function (index) {\n    return itemRefs.current[elementIdsRef.current.getItemId(index)];\n  }; // Effects.\n  // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11yStatusMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, highlightedIndex, inputValue, items]); // Sets a11y status message on changes in selectedItem.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    var previousResultCount = previousResultCountRef.current;\n    updateA11yStatus(function () {\n      return getA11ySelectionMessage({\n        isOpen: isOpen,\n        highlightedIndex: highlightedIndex,\n        selectedItem: selectedItem,\n        inputValue: inputValue,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length,\n        itemToString: itemToString,\n        previousResultCount: previousResultCount\n      });\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItem]); // Scroll on highlighted item if change comes from keyboard.\n\n  useEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoView(getItemNodeFromIndex(highlightedIndex), menuRef.current);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]); // Controls the focus on the menu or the toggle button.\n\n  useEffect(function () {\n    // Don't focus menu on first render.\n    if (isInitialMountRef.current) {\n      // Unless it was initialised as open.\n      if (initialIsOpen || defaultIsOpen || isOpen) {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      }\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [isOpen]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [comboboxRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getComboboxProps', 'getMenuProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []);\n  /* Event handler functions */\n\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          shiftKey: event.shiftKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        dispatch({\n          type: InputKeyDownEscape\n        });\n      },\n      Enter: function Enter(event) {\n        // if IME composing, wait for next Enter keydown event.\n        if (event.which === 229) {\n          return;\n        }\n\n        var latestState = latest.current.state;\n\n        if (latestState.isOpen && latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEnter,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }\n    };\n  }, [dispatch, latest]); // Getter props.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIdsRef.current.labelId,\n      htmlFor: elementIdsRef.current.inputId\n    }, labelProps);\n  }, []);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"onMouseLeave\", \"refKey\", \"ref\"]);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIdsRef.current.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = elementIdsRef.current.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        item = _ref3.item,\n        index = _ref3.index,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onMouseMove = _ref3.onMouseMove,\n        onClick = _ref3.onClick,\n        onPress = _ref3.onPress,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onClick\", \"onPress\"]);\n\n    var _latest$current = latest.current,\n        latestProps = _latest$current.props,\n        latestState = _latest$current.state;\n    var itemIndex = getItemIndex(index, item, latestProps.items);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either item or item index in getItemProps!');\n    }\n\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    return _extends(_extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIdsRef.current.getItemId(itemIndex)] = itemNode;\n      }\n    }), _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (itemIndex === latestState.highlightedIndex), _extends3.id = elementIdsRef.current.getItemId(itemIndex), _extends3), !rest.disabled && (_ref4 = {\n      onMouseMove: callAllEventHandlers(onMouseMove, function itemHandleMouseMove() {\n        if (index === latestState.highlightedIndex) {\n          return;\n        }\n\n        shouldScrollRef.current = false;\n        dispatch({\n          type: ItemMouseMove$1,\n          index: index\n        });\n      })\n    }, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    }), _ref4)), rest);\n  }, [dispatch, latest]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n        onClick = _ref5.onClick,\n        onPress = _ref5.onPress,\n        _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, [\"onClick\", \"onPress\", \"refKey\", \"ref\"]);\n\n    var toggleButtonHandleClick = function () {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n\n      if (!latest.current.state.isOpen && inputRef.current) {\n        inputRef.current.focus();\n      }\n    };\n\n    return _extends(_extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4.id = elementIdsRef.current.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    })), rest);\n  }, [dispatch, latest]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n        onKeyDown = _ref6.onKeyDown,\n        onChange = _ref6.onChange,\n        onInput = _ref6.onInput,\n        onBlur = _ref6.onBlur,\n        onChangeText = _ref6.onChangeText,\n        _ref6$refKey = _ref6.refKey,\n        refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n        ref = _ref6.ref,\n        rest = _objectWithoutPropertiesLoose(_ref6, [\"onKeyDown\", \"onChange\", \"onInput\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"]);\n\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n        _ref7$suppressRefErro = _ref7.suppressRefError,\n        suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n\n    var inputHandleKeyDown = function (event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n\n    var inputHandleChange = function (event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n\n    var inputHandleBlur = function () {\n      /* istanbul ignore else */\n      if (!mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: InputBlur\n        });\n      }\n    };\n    /* istanbul ignore next (preact) */\n\n\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n\n    if (!rest.disabled) {\n      var _eventHandlers;\n\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers);\n    }\n    /* istanbul ignore if (react-native) */\n\n\n    return _extends(_extends(_extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5.id = elementIdsRef.current.inputId, _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIdsRef.current.menuId, _extends5), latestState.isOpen && latestState.highlightedIndex > -1 && {\n      'aria-activedescendant': elementIdsRef.current.getItemId(latestState.highlightedIndex)\n    }), {}, {\n      'aria-labelledby': elementIdsRef.current.labelId,\n      // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n      // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n      autoComplete: 'off',\n      value: latestState.inputValue\n    }, eventHandlers), rest);\n  }, [dispatch, inputKeyDownHandlers, latest, mouseAndTouchTrackersRef, setGetterPropCallInfo]);\n  var getComboboxProps = useCallback(function (_temp7, _temp8) {\n    var _extends6;\n\n    var _ref8 = _temp7 === void 0 ? {} : _temp7,\n        _ref8$refKey = _ref8.refKey,\n        refKey = _ref8$refKey === void 0 ? 'ref' : _ref8$refKey,\n        ref = _ref8.ref,\n        rest = _objectWithoutPropertiesLoose(_ref8, [\"refKey\", \"ref\"]);\n\n    var _ref9 = _temp8 === void 0 ? {} : _temp8,\n        _ref9$suppressRefErro = _ref9.suppressRefError,\n        suppressRefError = _ref9$suppressRefErro === void 0 ? false : _ref9$suppressRefErro;\n\n    setGetterPropCallInfo('getComboboxProps', suppressRefError, refKey, comboboxRef);\n    return _extends((_extends6 = {}, _extends6[refKey] = handleRefs(ref, function (comboboxNode) {\n      comboboxRef.current = comboboxNode;\n    }), _extends6.role = 'combobox', _extends6['aria-haspopup'] = 'listbox', _extends6['aria-owns'] = elementIdsRef.current.menuId, _extends6['aria-expanded'] = latest.current.state.isOpen, _extends6), rest);\n  }, [latest, setGetterPropCallInfo]); // returns\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getComboboxProps: getComboboxProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getInitialValue$1(props, propKey) {\n  return getInitialValue(props, propKey, defaultStateValues);\n}\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\n\nfunction getDefaultValue$1(props, propKey) {\n  return getDefaultValue(props, propKey, defaultStateValues);\n}\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\n\nfunction getInitialState$2(props) {\n  var activeIndex = getInitialValue$1(props, 'activeIndex');\n  var selectedItems = getInitialValue$1(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\n\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n\n  var element = event.target;\n\n  if (element instanceof HTMLInputElement && // if element is a text input\n  element.value !== '' && ( // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\nvar propTypes$2 = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps$3 = {\n  itemToString: defaultProps.itemToString,\n  stateReducer: defaultProps.stateReducer,\n  environment: defaultProps.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\n\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset$2\n});\n\n/* eslint-disable complexity */\n\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n      index = action.index,\n      props = action.props,\n      selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems;\n  var changes;\n\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        var newActiveIndex = activeIndex;\n\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1))\n        }, {\n          activeIndex: _newActiveIndex\n        });\n        break;\n      }\n\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n\n    case FunctionReset$2:\n      changes = {\n        activeIndex: getDefaultValue$1(props, 'activeIndex'),\n        selectedItems: getDefaultValue$1(props, 'selectedItems')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends(_extends({}, state), changes);\n}\n\nuseMultipleSelection.stateChangeTypes = stateChangeTypes$3;\n\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  // Props defaults and destructuring.\n  var props = _extends(_extends({}, defaultProps$3), userProps);\n\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n      itemToString = props.itemToString,\n      environment = props.environment,\n      keyNavigationNext = props.keyNavigationNext,\n      keyNavigationPrevious = props.keyNavigationPrevious; // Reducer init.\n\n  var _useControlledReducer = useControlledReducer(downshiftMultipleSelectionReducer, getInitialState$2(props), props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems; // Refs.\n\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = []; // used for checking when props are moving from controlled to uncontrolled.\n\n  var prevPropsRef = useRef(props);\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Effects.\n\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n\n    previousSelectedItemsRef.current = selectedItems; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]); // Sets focus on active item.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    validateControlledUnchanged(state, prevPropsRef.current, props);\n    prevPropsRef.current = props;\n  }, [state, props]);\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n  }, []); // Event handler functions.\n\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]); // Getter props.\n\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n\n    var _ref3 = _temp === void 0 ? {} : _temp,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        selectedItem = _ref3.selectedItem,\n        index = _ref3.index,\n        rest = _objectWithoutPropertiesLoose(_ref3, [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"]);\n\n    var latestState = latest.current.state;\n    var itemIndex = getItemIndex(index, selectedItem, latestState.selectedItems);\n\n    if (itemIndex < 0) {\n      throw new Error('Pass either selectedItem or index in getSelectedItemProps!');\n    }\n\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = index === latestState.activeIndex ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    }), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    }), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n        _ref4$refKey = _ref4.refKey,\n        refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n        ref = _ref4.ref,\n        onKeyDown = _ref4.onKeyDown,\n        onClick = _ref4.onClick,\n        _ref4$preventKeyActio = _ref4.preventKeyAction,\n        preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n        rest = _objectWithoutPropertiesLoose(_ref4, [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"]);\n\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n        _ref5$suppressRefErro = _ref5.suppressRefError,\n        suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    return _extends(_extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, function dropdownHandleKeyDown(event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && dropdownKeyDownHandlers[key]) {\n          dropdownKeyDownHandlers[key](event);\n        }\n      }),\n      onClick: callAllEventHandlers(onClick, function dropdownHandleClick() {\n        dispatch({\n          type: DropdownClick\n        });\n      })\n    }), rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]); // returns\n\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport default Downshift;\nexport { resetIdCounter, useCombobox, useMultipleSelection, useSelect };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}