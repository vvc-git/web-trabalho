{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createStyles = exports.Dropdown = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_popper_1 = require(\"react-popper\");\nvar useClickOutside_1 = require(\"../../hooks/useClickOutside\");\nvar styles_1 = require(\"../../styles\");\nvar string_1 = require(\"../../util/string\");\nvar DropdownMenu_1 = require(\"./DropdownMenu\");\nfunction Dropdown(props) {\n  var children = props.children,\n    anchorRef = props.anchorRef,\n    popperProps = props.popperProps,\n    open = props.open,\n    onClose = props.onClose,\n    autoclose = props.autoclose,\n    style = props.style,\n    rest = __rest(props, [\"children\", \"anchorRef\", \"popperProps\", \"open\", \"onClose\", \"autoclose\", \"style\"]);\n  var classes = styles_1.useStyles(exports.createStyles).classes;\n  var _a = react_1.useState(),\n    menuRef = _a[0],\n    setMenuRef = _a[1];\n  var _b = react_popper_1.usePopper(anchorRef, menuRef, popperProps),\n    popperStyle = _b.styles.popper,\n    placement = _b.attributes.placement;\n  var dropdownIdRef = react_1.default.useRef(\"dropdown-\" + string_1.randomStr());\n  // Attaches aria attributes to anchor element\n  react_1.useEffect(function () {\n    if (anchorRef) {\n      anchorRef.setAttribute('aria-haspopup', 'true');\n      if (open) {\n        anchorRef.setAttribute('aria-expanded', 'true');\n        anchorRef.setAttribute('aria-controls', dropdownIdRef.current);\n      } else {\n        anchorRef.removeAttribute('aria-expanded');\n        anchorRef.removeAttribute('aria-controls');\n      }\n    }\n  }, [open, anchorRef]);\n  // Attaches Escape key event\n  react_1.useEffect(function () {\n    var handleKeyDown = function (e) {\n      if (open && e.key === 'Escape') {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      return document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [open, onClose]);\n  // When opened, focus the first menu item\n  var isFirstRender = react_1.useRef(true);\n  react_1.useEffect(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    if (open) {\n      setTimeout(function () {\n        // Delay focus to preserve window scroll position\n        if (menuRef) {\n          var firstItem = menuRef.querySelector('[role=\"menuitem\"]:not([aria-disabled=\"true\"])');\n          if (firstItem) {\n            firstItem.focus();\n          }\n        }\n      });\n    }\n  }, [open, menuRef]);\n  // Call onClose if target focus is outside menu\n  var handleBlur = react_1.useCallback(function () {\n    setTimeout(function () {\n      if (menuRef) {\n        var currentFocus = menuRef.ownerDocument.activeElement;\n        if (!menuRef.contains(currentFocus)) {\n          onClose();\n        }\n      }\n    });\n  }, [onClose, menuRef]);\n  // Call `onClose` when clicked outside dropdown and anchor\n  useClickOutside_1.useClickOutside([anchorRef, menuRef], function () {\n    if (open) {\n      onClose();\n    }\n  });\n  var handleMenuClick = react_1.useCallback(function () {\n    if (autoclose) {\n      onClose();\n    }\n  }, [autoclose, onClose]);\n  return open && react_1.default.createElement(DropdownMenu_1.DropdownMenu, __assign({\n    id: dropdownIdRef.current,\n    innerRef: setMenuRef,\n    style: [popperStyle, classes.dropdown, style],\n    \"data-placement\": placement,\n    onClick: handleMenuClick,\n    onBlur: handleBlur\n  }, rest), children);\n}\nexports.Dropdown = Dropdown;\nDropdown.defaultProps = {\n  autoclose: true,\n  onClose: function () {\n    return null;\n  }\n};\nexports.createStyles = function (theme) {\n  return {\n    dropdown: {\n      zIndex: theme.zIndex.dropdown\n    }\n  };\n};\n//# sourceMappingURL=Dropdown.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}