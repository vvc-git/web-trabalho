{"ast":null,"code":"\"use strict\";\n\n// https://www.w3.org/TR/wai-aria-practices-1.1/#kbd_roving_tabindex\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useRovingTabIndex = void 0;\nvar react_1 = require(\"react\");\nvar util_1 = require(\"../util\");\nvar defaultOptions = {\n  initialIndex: 0,\n  nextKeys: ['ArrowDown', 'ArrowRight'],\n  prevKeys: ['ArrowUp', 'ArrowLeft'],\n  firstKeys: ['Home'],\n  lastKeys: ['End'],\n  wrapAround: false\n};\nfunction useRovingTabIndex(options) {\n  var _a = util_1.merge({}, defaultOptions, options),\n    initialIndex = _a.initialIndex,\n    nextKeys = _a.nextKeys,\n    prevKeys = _a.prevKeys,\n    firstKeys = _a.firstKeys,\n    lastKeys = _a.lastKeys,\n    getItems = _a.getItems,\n    wrapAround = _a.wrapAround;\n  var rootRef = react_1.useRef();\n  // Initialize tabindex attributes:\n  react_1.useEffect(function () {\n    var items = getItems(rootRef.current);\n    items.forEach(function (item, idx) {\n      if (idx === initialIndex) {\n        item.setAttribute('tabindex', '0');\n      } else {\n        item.setAttribute('tabindex', '-1');\n      }\n    });\n  }, [initialIndex]);\n  // Manage child items focus event:\n  react_1.useEffect(function () {\n    var items = getItems(rootRef.current);\n    var handleChildFocus = function (event) {\n      items.forEach(function (item) {\n        return item.setAttribute('tabindex', '-1');\n      });\n      var target = event.currentTarget;\n      target.setAttribute('tabindex', '0');\n    };\n    items.forEach(function (item) {\n      return item.addEventListener('focus', handleChildFocus);\n    });\n    return function () {\n      return items.forEach(function (item) {\n        return item.removeEventListener('focus', handleChildFocus);\n      });\n    };\n  }, [options]);\n  // Manage keydown event on root ref:\n  react_1.useEffect(function () {\n    var getTargetIndex = function (items, key) {\n      var activeElement = document.activeElement;\n      var activeIndex = items.indexOf(activeElement);\n      if (nextKeys.includes(key)) {\n        return activeIndex < items.length - 1 ? activeIndex + 1 : wrapAround ? 0 : null;\n      }\n      if (prevKeys.includes(key)) {\n        return activeIndex > 0 ? activeIndex - 1 : wrapAround ? items.length - 1 : null;\n      }\n      if (firstKeys.includes(key)) {\n        return 0;\n      }\n      if (lastKeys.includes(key)) {\n        return items.length - 1;\n      }\n      return null;\n    };\n    var handleKeyDown = function (event) {\n      if (__spreadArrays(nextKeys, prevKeys, firstKeys, lastKeys).includes(event.key)) {\n        var items = getItems(rootRef.current);\n        var targetIndex = getTargetIndex(items, event.key);\n        var target = items[targetIndex];\n        if (target) {\n          target.focus();\n        }\n        event.preventDefault();\n      }\n    };\n    rootRef.current.addEventListener('keydown', handleKeyDown);\n    return function () {\n      return rootRef.current.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [options]);\n  return rootRef;\n}\nexports.useRovingTabIndex = useRovingTabIndex;","map":{"version":3,"names":["react_1","require","util_1","defaultOptions","initialIndex","nextKeys","prevKeys","firstKeys","lastKeys","wrapAround","useRovingTabIndex","options","_a","merge","getItems","rootRef","useRef","useEffect","items","current","forEach","item","idx","setAttribute","handleChildFocus","event","target","currentTarget","addEventListener","removeEventListener","getTargetIndex","key","activeElement","document","activeIndex","indexOf","includes","length","handleKeyDown","__spreadArrays","targetIndex","focus","preventDefault","exports"],"sources":["../../src/hooks/useRovingTabIndex.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}