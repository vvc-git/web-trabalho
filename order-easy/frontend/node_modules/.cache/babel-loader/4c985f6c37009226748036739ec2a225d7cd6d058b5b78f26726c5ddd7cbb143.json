{"ast":null,"code":"\"use strict\";\n\n// From downshift examples\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MultiDownshift = void 0;\nvar downshift_1 = __importDefault(require(\"downshift\"));\nvar react_1 = __importStar(require(\"react\"));\nvar util_1 = require(\"../../../util\");\nvar SelectDownshift_1 = require(\"../SelectSingle/SelectDownshift\");\nfunction MultiDownshift(props) {\n  var downshiftRef = react_1.useRef();\n  var _a = react_1.useState(props.selectedItems),\n    selectedItems = _a[0],\n    setSelectedItems = _a[1];\n  var _b = react_1.useState(false),\n    changed = _b[0],\n    setChanged = _b[1];\n  react_1.useEffect(function () {\n    setSelectedItems(props.selectedItems);\n  }, [props.selectedItems]);\n  react_1.useEffect(function () {\n    if (downshiftRef.current && changed) {\n      props.onChange && props.onChange(selectedItems, getStateAndHelpers(downshiftRef.current));\n      props.onSelect && props.onSelect(selectedItems, getStateAndHelpers(downshiftRef.current));\n      setChanged(false);\n    }\n  }, [selectedItems]);\n  var isSelected = function (item) {\n    return util_1.some(selectedItems, function (i) {\n      return props.itemIsEqual(i, item);\n    });\n  };\n  var handleChange = function (selectedItem) {\n    if (selectedItem) {\n      if (isSelected(selectedItem)) {\n        removeItem(selectedItem);\n      } else {\n        addItem(selectedItem);\n      }\n    }\n  };\n  var removeItem = function (selectedItem) {\n    setChanged(true);\n    setSelectedItems(function (currentItems) {\n      return currentItems.filter(function (item) {\n        return !props.itemIsEqual(selectedItem, item);\n      });\n    });\n  };\n  var addItem = function (item) {\n    setChanged(true);\n    if (!isSelected(item)) {\n      setSelectedItems(function (currentItems) {\n        return __spreadArrays(currentItems, [item]);\n      });\n    }\n  };\n  var getStateAndHelpers = function (downshift) {\n    downshiftRef.current = downshift;\n    return __assign(__assign({}, downshift), {\n      selectedItems: selectedItems,\n      isSelected: isSelected,\n      addItem: addItem,\n      removeItem: removeItem\n    });\n  };\n  var children = props.children,\n    onSelect = props.onSelect,\n    rest = __rest(props\n    // TODO: compose together props (rather than overwriting them) like downshift does\n    , [\"children\", \"onSelect\"]);\n  // TODO: compose together props (rather than overwriting them) like downshift does\n  return react_1.default.createElement(SelectDownshift_1.SelectDownshift, __assign({}, rest, {\n    stateReducer: stateReducer,\n    onChange: handleChange,\n    selectedItem: null,\n    keepFilterAfterSelect: true\n  }), function (downshift) {\n    return children(getStateAndHelpers(downshift));\n  });\n}\nexports.MultiDownshift = MultiDownshift;\nMultiDownshift.defaultProps = {\n  selectedItems: [],\n  itemIsEqual: function (a, b) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('MultiDownshift: using a deep compare itemIsEqual implementation for object comparision.' + ' You should probably provide your own `itemIsEqual` implementation.');\n    }\n    return util_1.isEqual(a, b);\n  }\n};\nvar stateReducer = function (state, changes) {\n  var inputValue = changes.inputValue,\n    rest = __rest(changes, [\"inputValue\"]);\n  if (changes.type === undefined && state.isOpen && !changes.isOpen) {\n    // Clear inputValue when select is closed\n    return __assign(__assign({}, changes), {\n      inputValue: ''\n    });\n  }\n  switch (changes.type) {\n    case downshift_1.default.stateChangeTypes.changeInput:\n      return __assign(__assign({}, rest), {\n        inputValue: inputValue\n      });\n    case downshift_1.default.stateChangeTypes.keyDownEnter:\n    case downshift_1.default.stateChangeTypes.clickItem:\n      return __assign(__assign({}, rest), {\n        highlightedIndex: state.highlightedIndex,\n        isOpen: true\n      });\n    default:\n      return rest;\n  }\n};","map":{"version":3,"names":["downshift_1","__importDefault","require","react_1","__importStar","util_1","SelectDownshift_1","MultiDownshift","props","downshiftRef","useRef","_a","useState","selectedItems","setSelectedItems","_b","changed","setChanged","useEffect","current","onChange","getStateAndHelpers","onSelect","isSelected","item","some","i","itemIsEqual","handleChange","selectedItem","removeItem","addItem","currentItems","filter","__spreadArrays","downshift","__assign","children","rest","__rest","default","createElement","SelectDownshift","stateReducer","keepFilterAfterSelect","exports","defaultProps","a","b","process","env","NODE_ENV","console","warn","isEqual","state","changes","inputValue","type","undefined","isOpen","stateChangeTypes","changeInput","keyDownEnter","clickItem","highlightedIndex"],"sources":["../../../../src/components/Select/SelectMulti/MultiDownshift.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}