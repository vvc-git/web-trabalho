{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createStyles = exports.Dropdown = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_popper_1 = require(\"react-popper\");\nvar useClickOutside_1 = require(\"../../hooks/useClickOutside\");\nvar styles_1 = require(\"../../styles\");\nvar string_1 = require(\"../../util/string\");\nvar DropdownMenu_1 = require(\"./DropdownMenu\");\nfunction Dropdown(props) {\n  var children = props.children,\n    anchorRef = props.anchorRef,\n    popperProps = props.popperProps,\n    open = props.open,\n    onClose = props.onClose,\n    autoclose = props.autoclose,\n    style = props.style,\n    rest = __rest(props, [\"children\", \"anchorRef\", \"popperProps\", \"open\", \"onClose\", \"autoclose\", \"style\"]);\n  var classes = styles_1.useStyles(exports.createStyles).classes;\n  var _a = react_1.useState(),\n    menuRef = _a[0],\n    setMenuRef = _a[1];\n  var _b = react_popper_1.usePopper(anchorRef, menuRef, popperProps),\n    popperStyle = _b.styles.popper,\n    placement = _b.attributes.placement;\n  var dropdownIdRef = react_1.default.useRef(\"dropdown-\" + string_1.randomStr());\n  // Attaches aria attributes to anchor element\n  react_1.useEffect(function () {\n    if (anchorRef) {\n      anchorRef.setAttribute('aria-haspopup', 'true');\n      if (open) {\n        anchorRef.setAttribute('aria-expanded', 'true');\n        anchorRef.setAttribute('aria-controls', dropdownIdRef.current);\n      } else {\n        anchorRef.removeAttribute('aria-expanded');\n        anchorRef.removeAttribute('aria-controls');\n      }\n    }\n  }, [open, anchorRef]);\n  // Attaches Escape key event\n  react_1.useEffect(function () {\n    var handleKeyDown = function (e) {\n      if (open && e.key === 'Escape') {\n        onClose();\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      return document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [open, onClose]);\n  // When opened, focus the first menu item\n  var isFirstRender = react_1.useRef(true);\n  react_1.useEffect(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    if (open) {\n      setTimeout(function () {\n        // Delay focus to preserve window scroll position\n        if (menuRef) {\n          var firstItem = menuRef.querySelector('[role=\"menuitem\"]:not([aria-disabled=\"true\"])');\n          if (firstItem) {\n            firstItem.focus();\n          }\n        }\n      });\n    }\n  }, [open, menuRef]);\n  // Call onClose if target focus is outside menu\n  var handleBlur = react_1.useCallback(function () {\n    setTimeout(function () {\n      if (menuRef) {\n        var currentFocus = menuRef.ownerDocument.activeElement;\n        if (!menuRef.contains(currentFocus)) {\n          onClose();\n        }\n      }\n    });\n  }, [onClose, menuRef]);\n  // Call `onClose` when clicked outside dropdown and anchor\n  useClickOutside_1.useClickOutside([anchorRef, menuRef], function () {\n    if (open) {\n      onClose();\n    }\n  });\n  var handleMenuClick = react_1.useCallback(function () {\n    if (autoclose) {\n      onClose();\n    }\n  }, [autoclose, onClose]);\n  return open && react_1.default.createElement(DropdownMenu_1.DropdownMenu, __assign({\n    id: dropdownIdRef.current,\n    innerRef: setMenuRef,\n    style: [popperStyle, classes.dropdown, style],\n    \"data-placement\": placement,\n    onClick: handleMenuClick,\n    onBlur: handleBlur\n  }, rest), children);\n}\nexports.Dropdown = Dropdown;\nDropdown.defaultProps = {\n  autoclose: true,\n  onClose: function () {\n    return null;\n  }\n};\nexports.createStyles = function (theme) {\n  return {\n    dropdown: {\n      zIndex: theme.zIndex.dropdown\n    }\n  };\n};","map":{"version":3,"names":["react_1","__importStar","require","react_popper_1","useClickOutside_1","styles_1","string_1","DropdownMenu_1","Dropdown","props","children","anchorRef","popperProps","open","onClose","autoclose","style","rest","__rest","classes","useStyles","exports","createStyles","_a","useState","menuRef","setMenuRef","_b","usePopper","popperStyle","styles","popper","placement","attributes","dropdownIdRef","default","useRef","randomStr","useEffect","setAttribute","current","removeAttribute","handleKeyDown","e","key","document","addEventListener","removeEventListener","isFirstRender","setTimeout","firstItem","querySelector","focus","handleBlur","useCallback","currentFocus","ownerDocument","activeElement","contains","useClickOutside","handleMenuClick","createElement","DropdownMenu","__assign","id","innerRef","dropdown","onClick","onBlur","defaultProps","theme","zIndex"],"sources":["../../../src/components/Dropdown/Dropdown.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}